<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="bnb-actions.html">
<link rel="import" href="bnb-common-styles.html">
<link rel="import" href="bnb-divider.html">
<link rel="import" href="bnb-icons.html">

<dom-module id="bnb-oauth">
  <template>
    <style include="bnb-common-styles">
      paper-button {
        text-transform:none;
      }

      paper-button span {
        padding-left: 2px;
      }

      bnb-divider {
      }

      .title {
        margin-bottom: 16px;
      }

      .title span {
        padding-left: 16px;
        padding-right: 16px;
        color: var(--secondary-text-color);
        text-align: center;
      }

      .facebook {
        background-color: var(--paper-indigo-500);
      }

      .github {
        background-color: var(--paper-grey-200);
        color: black;
      }

      .google {
        background-color: var(--paper-red-500);
      }
    </style>
    <div class="layout vertical center-justified">

      <div class="title layout horizontal center-justified center">
        <bnb-divider class="flex"></bnb-divider>
        <span>or log in using</span>
        <bnb-divider class="flex"></bnb-divider>
      </div>
      <div class="layout horizontal center-justified center">
        <paper-button on-tap="facebookTapped" class="facebook">
          <iron-icon icon="bnb-icons:facebook"></iron-icon>
          <span>Facebook</span>
        </paper-button>
        <paper-button on-tap="githubTapped" class="github">
          <iron-icon icon="bnb-icons:github"></iron-icon>
          <span>Github</span>
        </paper-button>
        <paper-button on-tap="googleTapped" class="google">
          <iron-icon icon="bnb-icons:gplus"></iron-icon>
          <span>Google</span>
        </paper-button>
      </div>
    </div>
  </template>

  <script>
    class BnbOAuth extends BnbActions(Polymer.Element) {
      static get is() { return 'bnb-oauth'; }

      facebookTapped() {
        this._callService('facebook');
      }

      githubTapped() {
        this._callService('github');
      }

      googleTapped() {
        this._callService('google_oauth2');
      }

      _callService(service) {
        var origin = window.location.protocol + '//' + window.location.host + window.location.pathname;
        var url = this.getRequestUrl('auth/' + service + '?auth_origin_url=' + origin);
        window.location.replace(url);
      }
    }

    window.customElements.define(BnbOAuth.is, BnbOAuth);

  </script>

</dom-module>
